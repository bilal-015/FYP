<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interview Report | AI Interview Platform</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Inter", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #0f172a, #1e293b);
        min-height: 100vh;
        color: #f8fafc;
        padding: 20px;
      }

      .report-container {
        max-width: 1200px;
        margin: 0 auto;
      }

      /* ===== Report Header ===== */
      .report-header {
        background: linear-gradient(135deg, #4f46e5, #7c3aed);
        padding: 30px 40px;
        display: flex;
        flex-direction: column; /* Stack content */
        align-items: center;
        position: relative;
        overflow: hidden;
        border-radius: 15px;
      }

      .report-header::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.1) 0%,
          rgba(255, 255, 255, 0) 70%
        );
        z-index: 0;
      }

      /* Top row inside header */
      .header-top {
        display: flex;
        justify-content: space-between;
        flex-direction: column;
        align-items: center;
        width: 100%;
        position: relative;
        z-index: 1;
        flex-wrap: wrap;
        gap: 20px;
      }

      .logo {
        display: flex;
        align-items: center;
        margin: auto;
        margin-bottom: 7px;

        gap: 15px;
      }

      .logo i {
        font-size: 36px;
        background: linear-gradient(135deg, #a5b4fc, #c4b5fd);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .logo h1 {
        font-size: 28px;
        font-weight: 700;
        background: linear-gradient(135deg, #e0e7ff, #ede9fe);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .candidate-info {
        display: flex;
        gap: 25px;
        flex-wrap: wrap;
      }

      .info-box {
        background: rgba(15, 23, 42, 0.6);
        border-radius: 16px;
        padding: 15px 25px;
        display: flex;
        align-items: center;
        gap: 12px;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .info-icon {
        font-size: 24px;
        color: #c4b5fd;
      }

      .info-content h3 {
        font-size: 14px;
        color: #c7d2fe;
        font-weight: 400;
        margin-bottom: 4px;
      }

      .info-content p {
        font-size: 18px;
        font-weight: 700;
        color: #f8fafc;
      }

      /* ===== Header Actions (Second Row) ===== */
      .header-actions {
        margin-top: 25px;
        display: flex;
        justify-content: center;
        gap: 20px;
        position: relative;
        z-index: 1;
        flex-wrap: wrap;
      }

      .action-btn {
        padding: 14px 25px;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 12px;
        transition: all 0.3s ease;
        border: none;
      }

      .download-btn,
      .dashboard-btn {
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        color: white;
      }

      .download-btn:hover,
      .dashboard-btn:hover {
        background: linear-gradient(135deg, #5659e6, #7a4dee);
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);
      }
      .report-content {
        padding: 40px;
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 30px;
      }

      .summary-card {
        grid-column: span 4;
        background: rgba(30, 41, 59, 0.6);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.05);
        display: flex;
        flex-direction: column;
        gap: 25px;
      }

      .section-title {
        font-size: 22px;
        font-weight: 700;
        color: #e2e8f0;
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 15px;
      }

      .section-title i {
        color: #6366f1;
      }

      .overall-score {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        gap: 15px;
      }

      .score-circle {
        width: 180px;
        height: 180px;
        border-radius: 50%;
        background: conic-gradient(#4ade80 0% 75%, #334155 75% 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      }

      .score-inner {
        width: 140px;
        height: 140px;
        border-radius: 50%;
        background: rgba(15, 23, 42, 0.8);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      .score-value {
        font-size: 42px;
        font-weight: 800;
        color: #4ade80;
        line-height: 1;
      }

      .score-label {
        font-size: 16px;
        color: #94a3b8;
      }

      .performance-text {
        text-align: center;
        color: #cbd5e1;
        line-height: 1.7;
      }

      .performance-text strong {
        color: #4ade80;
      }

      .metrics-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        margin-top: 15px;
      }

      .metric-card {
        background: rgba(15, 23, 42, 0.5);
        border-radius: 16px;
        padding: 20px;
        text-align: center;
      }

      .metric-value {
        font-size: 28px;
        font-weight: 700;
        color: #e2e8f0;
        margin-bottom: 5px;
      }

      .metric-label {
        font-size: 14px;
        color: #94a3b8;
      }

      .chart-card {
        grid-column: span 8;
        background: rgba(30, 41, 59, 0.6);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.05);
        display: flex;
        flex-direction: column;
        gap: 25px;
      }

      .chart-container {
        height: 300px;
        position: relative;
      }

      .section-card {
        grid-column: span 4;
        background: rgba(30, 41, 59, 0.6);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.05);
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .detail-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .detail-item {
        background: rgba(15, 23, 42, 0.5);
        border-radius: 12px;
        padding: 18px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .detail-title {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 500;
        color: #e2e8f0;
      }

      .detail-title i {
        color: #6366f1;
      }

      .detail-value {
        font-weight: 700;
        font-size: 18px;
      }

      .correct {
        color: #4ade80;
      }

      .incorrect {
        color: #f87171;
      }

      .confidence-metrics {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        margin-top: 10px;
      }

      .confidence-metric {
        background: rgba(15, 23, 42, 0.5);
        border-radius: 12px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      .confidence-value {
        font-size: 32px;
        font-weight: 800;
        margin-bottom: 5px;
      }

      .confidence-label {
        font-size: 14px;
        color: #94a3b8;
      }

      .confidence-meter {
        background: rgba(15, 23, 42, 0.5);
        border-radius: 20px;
        padding: 25px;
        margin-top: 15px;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .meter-labels {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
        color: #94a3b8;
      }

      .meter-bar {
        height: 20px;
        background: rgba(30, 41, 59, 0.8);
        border-radius: 10px;
        overflow: hidden;
        position: relative;
      }

      .meter-fill {
        height: 100%;
        background: linear-gradient(90deg, #ef4444, #fbbf24, #34d399);
        width: 78%;
        transition: width 1s ease;
      }

      .meter-indicator {
        position: absolute;
        top: 0;
        left: 78%;
        height: 100%;
        width: 4px;
        background: white;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
      }

      @media (max-width: 1200px) {
        .summary-card,
        .section-card {
          grid-column: span 6;
        }

        .chart-card {
          grid-column: span 12;
        }
      }

      @media (max-width: 900px) {
        .report-header {
          flex-direction: column;
          gap: 20px;
          text-align: center;
        }

        .candidate-info {
          width: 100%;
          justify-content: center;
        }

        .header-actions {
          width: 100%;
          justify-content: center;
        }

        .summary-card,
        .section-card {
          grid-column: span 12;
        }

        .metrics-grid {
          grid-template-columns: 1fr;
        }

        .confidence-metrics {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 600px) {
        .report-header,
        .report-content {
          padding: 25px;
        }

        .info-box {
          padding: 12px 18px;
        }

        .candidate-info {
          flex-direction: column;
          gap: 10px;
        }

        .header-actions {
          flex-direction: column;
        }

        .action-btn {
          width: 100%;
          justify-content: center;
        }

        .score-circle {
          width: 150px;
          height: 150px;
        }

        .score-inner {
          width: 120px;
          height: 120px;
        }

        .score-value {
          font-size: 36px;
        }
      }
    </style>
  </head>
  <body>
    <div class="report-container">
      <!-- Report Header -->
      <div class="report-header">
        <!-- First Row -->
        <div class="header-top">
          <div class="logo">
            <i class="fas fa-robot"></i>
            <h1>InterviewAI</h1>
          </div>

          <div class="candidate-info">
            <div class="info-box">
              <i class="fas fa-user info-icon"></i>
              <div class="info-content">
                <h3>Candidate</h3>
                <p>{{full_name}}</p>
              </div>
            </div>
            <div class="info-box">
              <i class="fas fa-calendar info-icon"></i>
              <div class="info-content">
                <h3>Date</h3>
                <p>{{date}}</p>
              </div>
            </div>
            <div class="info-box">
              <i class="fas fa-clock info-icon"></i>
              <div class="info-content">
                <h3>Duration</h3>
                <p>{{duration_minutes}} minutes</p>
              </div>
            </div>
            <div class="info-box">
              <i class="fas fa-code info-icon"></i>
              <div class="info-content">
                <h3>Technology</h3>
                <p>{{technology}}</p>
              </div>
            </div>
            <div class="info-box">
              <i class="fas fa-signal info-icon"></i>
              <div class="info-content">
                <h3>Difficulty</h3>
                <p>{{difficulty}}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Second Row -->
        <div class="header-actions">
          <button class="action-btn dashboard-btn" id="dashboardBtn">
            <i class="fas fa-arrow-left"></i>
            Back to Dashboard
          </button>
          <button class="action-btn download-btn" id="downloadBtn">
            <i class="fas fa-file-pdf"></i>
            Download PDF
          </button>
        </div>
      </div>

      <!-- Report Content -->
      <div class="report-content">
        <!-- Summary Card -->
        <div class="summary-card">
          <h2 class="section-title">
            <i class="fas fa-chart-pie"></i> Overall Performance
          </h2>

          <div class="overall-score">
            <div class="score-circle">
              <div class="score-inner">
                <div class="score-value">{{overall_score}}%</div>

                <div class="score-label">Score</div>
              </div>
            </div>

            <p class="performance-text">{{ performance_text }}</p>
          </div>

          <div class="metrics-grid">
            <div class="metric-card">
              <div class="metric-value">{{ technical_knowledge }}%</div>
              <div class="metric-label">Technical Knowledge</div>
            </div>
            <div class="metric-card">
              <div class="metric-value">{{ problem_solving }}%</div>
              <div class="metric-label">Problem Solving</div>
            </div>
            <div class="metric-card">
              <div class="metric-value">{{ code_quality }}%</div>
              <div class="metric-label">Code Quality</div>
            </div>
            <div class="metric-card">
              <div class="metric-value">{{ confidence }}%</div>
              <div class="metric-label">Confidence</div>
            </div>
          </div>
        </div>

        <!-- Chart Card -->
        <div class="chart-card">
          <h2 class="section-title">
            <i class="fas fa-chart-bar"></i> Performance Breakdown
          </h2>

          <div class="chart-container">
            <canvas id="performanceChart"></canvas>
          </div>
        </div>

        <!-- MCQ Test Section -->
        <div class="section-card">
          <h2 class="section-title">
            <i class="fas fa-list-ol"></i> MCQ Test Results
          </h2>

          <div class="detail-list">
            <div class="detail-item">
              <div class="detail-title">
                <i class="fas fa-check-circle"></i>
                <span>Correct Answers</span>
              </div>
              <div class="detail-value correct">
                {{ mcq_correct }}/{{ mcq_total }}
              </div>
            </div>

            <div class="detail-item">
              <div class="detail-title">
                <i class="fas fa-times-circle"></i>
                <span>Incorrect Answers</span>
              </div>
              <div class="detail-value incorrect">
                {{incorrect_mcqs}}/{{ mcq_total }}
              </div>
            </div>

            <div class="detail-item">
              <div class="detail-title">
                <i class="fas fa-clock"></i>
                <span>Time Taken</span>
              </div>
              <div class="detail-value">{{ mcq_time_taken }} min</div>
            </div>

            <div class="detail-item">
              <div class="detail-title">
                <i class="fas fa-star"></i>
                <span>Accuracy</span>
              </div>
              <div class="detail-value correct">{{ mcq_accuracy }}%</div>
            </div>
          </div>

          <div class="detail-item">
            <div class="detail-title">
              <i class="fas fa-medal"></i>
              <span>Strong Areas</span>
            </div>
            <div class="detail-value">{{ strong_areas }}</div>
          </div>

          <div class="detail-item">
            <div class="detail-title">
              <i class="fas fa-exclamation-triangle"></i>
              <span>Improvement Areas</span>
            </div>
            <div class="detail-value">{{ improvement_areas }}</div>
          </div>
        </div>

        <!-- Coding Test Section -->
        <div class="section-card">
          <h2 class="section-title">
            <i class="fas fa-laptop-code"></i> Coding Test Results
          </h2>

          <div class="detail-list">
            <div class="detail-item">
              <div class="detail-title">
                <i class="fas fa-check-circle"></i>
                <span>Problems Solved</span>
              </div>
              <div class="detail-value correct">
                {{ coding_problems_solved }}/{{ coding_problems_total }}
              </div>
            </div>

            <div class="detail-item">
              <div class="detail-title">
                <i class="fas fa-bug"></i>
                <span>Test Cases Passed</span>
              </div>
              <div class="detail-value correct">
                {{ coding_test_cases_passed }}/{{ coding_test_cases_total }}
              </div>
            </div>

            <div class="detail-item">
              <div class="detail-title">
                <i class="fas fa-clock"></i>
                <span>Average Time</span>
              </div>
              <div class="detail-value">
                {{ coding_avg_time_per_problem }} min/problem
              </div>
            </div>

            <div class="detail-item">
              <div class="detail-title">
                <i class="fas fa-star"></i>
                <span>Code Quality</span>
              </div>
              <div class="detail-value correct">{{ coding_code_quality }}%</div>
            </div>
          </div>

          <div class="detail-item">
            <div class="detail-title">
              <i class="fas fa-medal"></i>
              <span>Best Solution</span>
            </div>
            <div class="detail-value">{{ best_solution }}</div>
          </div>

          <div class="detail-item">
            <div class="detail-title">
              <i class="fas fa-exclamation-triangle"></i>
              <span>Optimization Needed</span>
            </div>
            <div class="detail-value">{{ optimization_needed }}</div>
          </div>
        </div>

        <!-- Confidence Assessment Section -->
        <div class="section-card">
          <h2 class="section-title">
            <i class="fas fa-user"></i> Confidence Assessment
          </h2>

          <div class="confidence-metrics">
            <div class="confidence-metric">
              <div class="confidence-value">{{ overall_confidence }}%</div>
              <div class="confidence-label">Overall Confidence</div>
            </div>

            <div class="confidence-metric">
              <div class="confidence-value">{{ eye_contact }}%</div>
              <div class="confidence-label">Eye Contact</div>
            </div>

            <div class="confidence-metric">
              <div class="confidence-value">{{ voice_clarity }}%</div>
              <div class="confidence-label">Voice Clarity</div>
            </div>

            <div class="confidence-metric">
              <div class="confidence-value">{{ facial_expressions }}%</div>
              <div class="confidence-label">Facial Expressions</div>
            </div>
          </div>

          <div class="confidence-meter">
            <div class="meter-labels">
              <span>Low</span>
              <span>Medium</span>
              <span>High</span>
            </div>
            <div class="meter-bar">
              <div class="meter-fill"></div>
              <div class="meter-indicator"></div>
            </div>
          </div>

          <div class="detail-item">
            <div class="detail-title">
              <i class="fas fa-thumbs-up"></i>
              <span>Strengths</span>
            </div>
            <div class="detail-value">{{ strengths }}</div>
          </div>

          <div class="detail-item">
            <div class="detail-title">
              <i class="fas fa-lightbulb"></i>
              <span>Suggestions</span>
            </div>
            <div class="detail-value">{{ suggestions }}</div>
          </div>
        </div>
      </div>
    </div>

    <script>
      window.onpageshow = function (event) {
        if (event.persisted) {
          window.location.reload(true);
        }
      };

      // Initialize jsPDF
      const { jsPDF } = window.jspdf;

      // Performance Chart

      const metricElements = document.querySelectorAll(".metric-value");

      // Convert NodeList to array and extract numbers
      const metricValues = Array.from(metricElements).map((el) =>
        parseInt(el.textContent.trim().replace("%", ""))
      );

      // Store each one separately if needed
      const [technicalKnowledge, problemSolving, codeQuality, confidence] = metricValues;
      const ctx = document.getElementById("performanceChart").getContext("2d");
      const performanceChart = new Chart(ctx, {
        type: "radar",
        data: {
          labels: [
            "TechnicalKnowledge",
            "Problem Solving",
            "Code Quality",
            "Communication",
            "Time Management",
            "Confidence",
          ],
          datasets: [
            {
              label: "Candidate Performance",
              data: [technicalKnowledge, problemSolving, codeQuality, 90, 65, confidence],
              backgroundColor: "rgba(67, 97, 238, 0.2)",
              borderColor: "rgba(67, 97, 238, 1)",
              borderWidth: 2,
              pointBackgroundColor: "rgba(67, 97, 238, 1)",
              pointBorderColor: "#fff",
              pointHoverBackgroundColor: "#fff",
              pointHoverBorderColor: "rgba(67, 97, 238, 1)",
            },
            {
              label: "Benchmark",
              data: [75, 70, 80, 75, 70, 75],
              backgroundColor: "rgba(99, 102, 241, 0.1)",
              borderColor: "rgba(99, 102, 241, 0.5)",
              borderWidth: 1,
              borderDash: [5, 5],
              pointBackgroundColor: "transparent",
              pointBorderColor: "transparent",
              pointHoverBackgroundColor: "transparent",
              pointHoverBorderColor: "transparent",
            },
          ],
        },
        options: {
          scales: {
            r: {
              angleLines: {
                color: "rgba(255, 255, 255, 0.1)",
              },
              grid: {
                color: "rgba(255, 255, 255, 0.1)",
              },
              pointLabels: {
                color: "#e2e8f0",
                font: {
                  size: 12,
                },
              },
              ticks: {
                backdropColor: "transparent",
                color: "rgba(255, 255, 255, 0.5)",
                stepSize: 20,
              },
              suggestedMin: 0,
              suggestedMax: 100,
            },
          },
          plugins: {
            legend: {
              labels: {
                color: "#e2e8f0",
                font: {
                  size: 12,
                },
              },
            },
          },
          maintainAspectRatio: false,
        },
      });

      // Animate confidence meter
      document.addEventListener("DOMContentLoaded", function () {
        const meterFill = document.querySelector(".meter-fill");
        const meterIndicator = document.querySelector(".meter-indicator");

        const confidenceElement = document.querySelector(".confidence_value");
        const targetConfidence = parseInt(confidenceElement.textContent);

        // Animate meter
        let current = 0;
        const increment = 1;

        const updateMeter = () => {
          if (current < targetConfidence) {
            current += increment;
            if (current > targetConfidence) current = targetConfidence;

            // Fill bar
            meterFill.style.width = current + "%";

            // Move indicator
            meterIndicator.style.left = current + "%";

            requestAnimationFrame(updateMeter);
          }
        };

        setTimeout(updateMeter, 1000);

        // Animate scores (your existing code)
        const scoreElements = document.querySelectorAll(
          ".score-value, .metric-value, .confidence-value"
        );
        scoreElements.forEach((el) => {
          const target = parseInt(el.textContent);
          let score = 0;
          const scoreIncrement = target / 50;

          const updateScore = () => {
            if (score < target) {
              score += scoreIncrement;
              if (score > target) score = target;
              el.textContent = Math.round(score) + "%";
              requestAnimationFrame(updateScore);
            }
          };

          setTimeout(updateScore, 1000);
        });
      });

      window.addEventListener("pageshow", function () {
        // bring dashboard button back to original state
        const btn = document.getElementById("dashboardBtn");
        btn.innerHTML = '<i class="fas fa-arrow-left"></i> Back to Dashboard';
        btn.disabled = false;
      });

      // PDF Generation Function
      function generatePDF() {
        const btn = document.getElementById("downloadBtn");
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
        btn.disabled = true;

        // Use html2canvas to capture the report
        html2canvas(document.querySelector(".report-container")).then(
          (canvas) => {
            const imgData = canvas.toDataURL("image/png");
            const pdf = new jsPDF({
              orientation: "portrait",
              unit: "mm",
              format: "a4",
            });

            const imgWidth = 210;
            const pageHeight = 297;
            const imgHeight = (canvas.height * imgWidth) / canvas.width;

            let renderHeight = imgHeight;
            let renderWidth = imgWidth;

            // If the image is taller than the page, scale it down proportionally
            if (imgHeight > pageHeight) {
              renderHeight = pageHeight;
              renderWidth = (canvas.width * renderHeight) / canvas.height;
            }

            pdf.addImage(imgData, "PNG", 0, 0, renderWidth, renderHeight);
            pdf.save("interview-report-john-doe.pdf");

            btn.innerHTML = '<i class="fas fa-file-pdf"></i> Download PDF';
            btn.disabled = false;
          }
        );
      }

      // Dashboard button click
      document
        .getElementById("dashboardBtn")
        .addEventListener("click", function () {
          window.location.href = "{%url 'dashboard'%}";
        });

      // Download button click
      document
        .getElementById("downloadBtn")
        .addEventListener("click", function () {
          generatePDF();
        });
      document.addEventListener("DOMContentLoaded", () => {
        const scoreElement = document.querySelector(".score-value");

        if (scoreElement) {
          // Extract number (remove % sign)
          const scoreText = scoreElement.textContent.trim();
          const targetScore = parseInt(scoreText.replace("%", "")) || 0;

          const scoreCircle = document.querySelector(".score-circle");
          const score = document.querySelector(".score-value");
          if (!scoreCircle) return;

          // Decide color based on score
          let color = "#4ade80"; // green (good)
          score.style.color = color;
          if (targetScore < 50) {
            color = "#f87171"; // red (bad)
            score.style.color = color;
          } else if (targetScore < 75) {
            color = "#facc15"; // yellow (average)
            score.style.color = color;
          }

          // Animate filling the circle
          let currentScore = 0;
          const step = 1; // how much to increase per frame
          const speed = 15; // smaller = faster animation

          const animate = () => {
            if (currentScore <= targetScore) {
              scoreCircle.style.background = `conic-gradient(${color} 0% ${currentScore}%, #334155 ${currentScore}% 100%)`;
              currentScore += step;
              setTimeout(animate, speed);
            }
          };

          animate();
        }
      });
    </script>
  </body>
</html>
